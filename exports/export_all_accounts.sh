#!/bin/bash

SAVEDIR="${HOME}/.ledger/exports"
accounts=("Assets:Bank-Bpm"
	"Assets:Bank-Bpm:Conto-Deposito"
	"Assets:Bank-Millennium"
	"Assets:Fiverr"
	"Assets:Investments:Funds"
	"Assets:Kraken"
	"Assets:Kraken:ADA"
	"Assets:Kraken:DASH"
	"Assets:Kraken:REP"
	"Assets:Kraken:XMR"
	"Assets:Kraken:XRP"
	"Assets:Paypal"
	"Assets:Revolut"
	"Assets:Revolut:Crypto:AMP"
	"Assets:Upwork"
	"Assets:Wise"
	"Expenses:ATM"
	"Expenses:Apparel"
	"Expenses:Bank-Commissions"
	"Expenses:Beauty"
	"Expenses:Card:Cartaimpronta"
	"Expenses:Culture"
	"Expenses:Drinks"
	"Expenses:Education"
	"Expenses:Electronics"
	"Expenses:Fees"
	"Expenses:Food-Delivery"
	"Expenses:Gift"
	"Expenses:Groceries"
	"Expenses:Health"
	"Expenses:Health:Doctors"
	"Expenses:Health:Medicines"
	"Expenses:House-Supplies-Appliances"
	"Expenses:Household"
	"Expenses:Household:Krakow"
	"Expenses:Household:Warsaw"
	"Expenses:Learning"
	"Expenses:Other"
	"Expenses:Restaurants-and-Food-Out"
	"Expenses:Social-Life"
	"Expenses:Subscriptions"
	"Expenses:Subscriptions:Gym"
	"Expenses:Subscriptions:Play"
	"Expenses:Subscriptions:Spotify"
	"Expenses:Subscriptions:Upc"
	"Expenses:Taxes"
	"Expenses:Taxes:Italy"
	"Expenses:Taxes:Poland"
	"Expenses:Transportation:Car-Rental"
	"Expenses:Transportation:Flights"
	"Expenses:Transportation:Public-Transportation"
	"Expenses:Transportation:Ships"
	"Expenses:Transportation:Taxi"
	"Expenses:Transportation:Trains"
	"Expenses:Travel"
	"Expenses:Travel:Accommodations"
	"Income:Advertising:Adsense"
	"Income:Advertising:Amazon"
	"Income:Bonus"
	"Income:Freelancing"
	"Income:Interests"
	"Income:Other"
	"Income:Parents"
	"Income:Paypal"
	"Income:Salary"
	"Income:Taxes:Italy"
	"Income:Taxes:Poland"
	"Income:Upwork-Gig"
)

for ACCOUNT in ${accounts[@]}; do
	echo "Exporting account ${ACCOUNT}..."
	hledger areg "${ACCOUNT}" -O csv > "${SAVEDIR}/$(echo ${ACCOUNT} | tr ':' '.').csv"
done

exit 0
